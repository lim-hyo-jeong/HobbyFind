# 취미 추천 사이트 — 상세 Use Case 문서

⸻

## 1. 액터 정의 (Actor Definitions)

| 액터            | 설명                                   | 권한/역할                                                  |
|-----------------|--------------------------------------|-----------------------------------------------------------|
| 비회원 사용자    | 로그인하지 않고 사이트에 접근하는 사용자 | 메인페이지 열람, 카테고리 필터 탐색, 북마크 불가             |
| 회원 사용자     | 로그인된 사용자                        | 모든 비회원 권한 + 북마크 추가/해제, 마이페이지 접근          |
| 시스템          | Next.js + Supabase 기반 웹 애플리케이션 | 요청 처리, 데이터 저장/조회, 인증·인가, UI 렌더링             |
| 관리자 (확장 가능) | 취미 데이터 관리                       | 취미 정보 등록·수정·삭제 (MVP 범위 외)                        |


⸻

## 2. 상세 Use Case 시나리오 (Detailed Use Case Scenarios)

#### UC-01: 메인페이지에서 취미 탐색
- 목적: 사용자가 관심 있는 취미를 필터링하고 조회
- 액터: 비회원, 회원
- 사전조건: 인터넷 연결 가능, 브라우저 접근 가능
- 후조건: 선택된 필터에 맞는 취미 카드 표시

#### UC-02: 북마크 추가/해제
- 목적: 회원 사용자가 취미를 북마크하여 마이페이지에 저장
- 액터: 회원
- 사전조건: 로그인 상태, 해당 취미 데이터 존재
- 후조건: 북마크 상태 변경(DB 업데이트), UI 즉시 반영

#### UC-03: 마이페이지 조회
- 목적: 북마크 목록과 카테고리별 통계 확인
- 액터: 회원
- 사전조건: 로그인 상태
- 후조건: 북마크 목록 및 통계 차트 표시

#### UC-04: 로그인/회원가입
- 목적: 회원이 되거나 세션 유지 상태로 접근
- 액터: 비회원
- 사전조건: 유효한 아이디와 비밀번호
- 후조건: 로그인 성공 시 홈으로 이동

⸻

## 3. 주요 단계 및 이벤트 흐름 (Main Steps and Flow of Events)

#### UC-01: 메인페이지 취미 탐색
1. 사용자가 메인페이지 접속
2. 시스템이 전체 취미 카드 데이터를 로드
3. 사용자가 카테고리 필터 클릭
4. 시스템이 해당 필터 조건에 맞는 취미 카드만 표시
5. (회원인 경우) 각 카드에 북마크 버튼 활성화

#### UC-02: 북마크 추가/해제
1. 회원이 카드의 북마크 버튼 클릭
2. 시스템이 현재 상태 조회(추가/해제 여부)
3. DB 업데이트 요청
4. 응답 성공 시 북마크 아이콘 상태 변경 및 토스트 알림 표시

#### UC-03: 마이페이지 조회
1. 회원이 마이페이지 버튼 클릭
2. 시스템이 세션 검증
3. DB에서 북마크 목록 및 카테고리별 집계 데이터 조회
4. UI에 목록과 차트 표시

#### UC-04: 로그인/회원가입
1. 사용자가 로그인 또는 회원가입 페이지 접속
2. 로그인: 아이디와 비밀번호 입력 후 제출
3. 회원가입: 아이디·비밀번호·약관 동의 입력 후 제출
4. 시스템이 입력값 검증 및 DB 확인/저장
5. 성공 시 세션 생성 후 홈으로 이동
6. 실패 시 에러 메시지 표시

⸻

## 4. 대체 흐름 및 엣지 케이스 (Alternative Flows and Edge Cases)

| 케이스              | 설명                          | 처리 방식                               |
|---------------------|-------------------------------|-----------------------------------------|
| 로그인 만료         | 북마크 시도 시 세션 없음       | 로그인 페이지로 리다이렉트              |
| 빈 북마크 목록      | 마이페이지 접근 시 북마크 0개  | “북마크한 취미가 없습니다” 메시지 표시   |
| DB 오류             | 북마크 저장 실패              | 오류 메시지 및 재시도 버튼 표시          |
| 네트워크 지연       | API 응답 지연                 | 로딩 스피너 표시 후 타임아웃 처리        |
| 잘못된 카테고리 URL | 존재하지 않는 카테고리         | 404 페이지 표시                          |

⸻

## 5. 사전조건과 사후조건 (Preconditions and Postconditions)

| Use Case       | 사전조건        | 사후조건                        |
|----------------|----------------|---------------------------------|
| 메인페이지 탐색 | 서비스 접속 가능 | 필터 조건에 맞는 카드 표시       |
| 북마크 추가/해제 | 로그인 상태     | DB 상태 변경 및 UI 반영          |
| 마이페이지 조회 | 로그인 상태     | 북마크 및 통계 표시              |
| 로그인/회원가입 | 유효한 계정 정보 | 세션 생성 및 홈 이동             |

⸻

## 6. 비즈니스 규칙 및 제약사항 (Business Rules and Constraints)

- 비회원은 북마크 불가  
- 동일 취미는 한 번만 북마크 가능  
- 비밀번호는 bcrypt로 암호화 저장  
- DB는 Supabase PostgreSQL 사용  
- 모바일/데스크톱 반응형 UI 필수 지원  

⸻

## 7. 예외 처리 절차 (Exception Handling Procedures)

- **DB 오류 발생**: 오류 메시지 + 재시도 버튼  
- **세션 만료**: 로그인 페이지로 이동 및 안내 메시지  
- **네트워크 끊김**: 캐시 데이터 표시 시도, 실패 시 안내 메시지  
- **입력값 오류**: 실시간 폼 검증 및 오류 표시  

⸻

## 8. UI 고려사항 (User Interface Considerations)

- 북마크 버튼: 활성(색상 강조) / 비활성(회색) 상태 시각적 구분  
- 카테고리 필터 버튼: 선택 상태 강조(배경색 변경)  
- 차트: 모바일에서는 세로 스크롤 가능, 색 대비 확보  
- 모든 버튼·이미지에 **ARIA 레이블 제공**  
- 폼 요소는 모바일 터치 편의성 고려 → 최소 높이 44px 이상  

⸻

## 9. 데이터 요구사항 및 데이터 흐름 (Data Requirements and Data Flow)

**데이터 요구사항**
- 사용자 데이터: id, 아이디, 비밀번호(암호화), 세션 토큰  
- 북마크 데이터: user_id, hobby_id, 생성일  

**데이터 흐름**
1. 클라이언트 → API 요청 → Supabase DB 조회/수정  
2. DB 응답 → 클라이언트 UI 업데이트  
3. 북마크 변경 시 실시간 상태 반영  

⸻

## 10. 보안 및 개인정보 고려사항 (Security and Privacy Considerations)

- 비밀번호는 bcrypt로 암호화 후 저장  
- 모든 API 요청은 HTTPS 사용  
- 사용자 본인 데이터만 접근 가능하도록 인증·인가 적용  
- JWT 또는 Supabase Auth 토큰 기반 세션 관리  
- CSRF/XSS 방지: 입력 검증, 토큰 기반 요청  